(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8bd4cd0"],{"1c8e":function(t,e,i){"use strict";i("99af"),i("e9c4"),i("d3b7");var n=i("cee4"),o=i("d445"),r=i("3136"),a=i("5cc6"),s={props:{options:{type:Object,default:{}}},data:function(){return{progress:new o["a"]({color:"var(--progress-bar)"}),overrideProxyChoice:!1,overrideUpdateInterval:null,disableLoader:!1,updater:null,defaultTimeout:5e4}},mounted:function(){this.fetchData(),this.updateInterval&&(this.continuousUpdates(),this.disableLoader=!0)},beforeDestroy:function(){this.updater&&clearInterval(this.updater)},computed:{proxyReqEndpoint:function(){var t=Object({NODE_ENV:"production",VUE_APP_VERSION:"2.1.2",BASE_URL:"/"}).VUE_APP_DOMAIN||window.location.origin;return"".concat(t).concat(a["serviceEndpoints"].corsProxy)},useProxy:function(){return this.options.useProxy||this.overrideProxyChoice},updateInterval:function(){var t=this.options.updateInterval;return null===t&&this.overrideUpdateInterval?1e3*this.overrideUpdateInterval:t?"boolean"===typeof t?3e4:"number"===typeof t&&t>=2&&t<=7200?1e3*t:0:0}},methods:{update:function(){this.startLoading(),this.fetchData()},continuousUpdates:function(){var t=this;this.updater=setInterval((function(){t.update()}),this.updateInterval)},error:function(t,e){Object(r["e"])(t,e),this.options.ignoreErrors||this.$emit("error",t)},startLoading:function(){this.disableLoader||(this.$emit("loading",!0),this.progress.start())},finishLoading:function(){var t=this;this.$emit("loading",!1),setTimeout((function(){t.progress.end()}),500)},fetchData:function(){this.finishLoading()},tooltip:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{content:t,html:e,trigger:"hover focus",delay:250}},makeRequest:function(t,e,i,o){var r=this,a=i||"GET",s=this.useProxy?this.proxyReqEndpoint:t,c=JSON.stringify(o||{}),u=e||null,l=this.useProxy?{"Target-URL":t,CustomHeaders:JSON.stringify(u)}:u,p=this.options.timeout||this.defaultTimeout,d={method:a,url:s,headers:l,data:c,timeout:p};return new Promise((function(t,e){n["a"].request(d).then((function(e){!1===e.data.success&&r.error("Proxy returned error from target server",e.data.message),t(e.data)})).catch((function(t){r.error("Unable to fetch data",t),e(t)})).finally((function(){r.finishLoading()}))}))}}};e["a"]=s},"289c":function(t,e,i){"use strict";i("8d47")},8953:function(t,e,i){"use strict";i("f6e9")},"8d47":function(t,e,i){},bce2:function(t,e,i){},c9a3:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t._self._c;return t.departures?e("div",{staticClass:"mvg-wrapper"},[t._l(t.departures,(function(i){return[e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.mvgTooltipDeparture(i),expression:"mvgTooltipDeparture(departure)"}],key:i.key,staticClass:"departure"},[e("span",{class:{live:i.live}},[t._v(" "+t._s(t._f("formatDepartureTime")(i.realtimeDepartureTime))+" ")])]),e("div",{key:i.key+"line",staticClass:"line"},[e("div",{staticClass:"transport",class:["type-"+i.transportType,"line-"+i.label]},[t._v(t._s(i.label))]),e("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.mvgTooltipDestination(i),expression:"mvgTooltipDestination(departure)"}],staticClass:"destination",class:{cancelled:i.cancelled}},[t._v(t._s(i.destination))]),e("span",{staticClass:"delay",class:{"has-delay":i.realtimeDepartureTime>i.plannedDepartureTime}},[t._v(t._s(Math.max(0,(i.realtimeDepartureTime-i.plannedDepartureTime)/6e4)))]),"UNKNOWN"!=i.occupancy?e("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:i.occupancy,expression:"departure.occupancy"}],staticClass:"occupancy",class:"occupancy-"+i.occupancy},[t._v("â– ")]):t._e()])]}))],2):t._e()},o=[],r=i("5530"),a=(i("99af"),i("4de4"),i("caad"),i("a15b"),i("14d9"),i("fb6a"),i("4e82"),i("d3b7"),i("2532"),i("2ca0"),i("159b"),i("1c8e")),s=i("5cc6"),c=i("b96f"),u={mixins:[a["a"]],components:{},data:function(){return{departures:null,locationSearch:null}},created:function(){var t=this;this.isLocationId?this.location=this.options.location:this.makeRequest(this.endpointLocation).then((function(e){var i=e.filter((function(t){return"STATION"===t.type}));i.length>0?(t.location=i[0].globalId,t.fetchData()):t.error("Cannot find station for specified string")}))},filters:{formatDepartureTime:function(t){var e=new Date(t).getTime()-(new Date).getTime(),i=Math.max(0,Math.round(e/6e4));return i}},computed:{isLocationId:function(){return this.options.location||this.error("Location is required"),"string"!==typeof this.options.location&&this.error("Location can only be a string"),!!this.options.location.startsWith("de:09162:")},offset:function(){return this.options.offset?this.options.offset:0},limit:function(){return this.options.limit||10},endpointDeparture:function(){return"".concat(s["widgetApiEndpoints"].mvg,"/departure?globalId=").concat(this.location,"&limit=30&offsetInMinutes=").concat(this.offset,"&transportTypes=UBAHN,TRAM,BUS,SBAHN")},endpointLocation:function(){return"".concat(s["widgetApiEndpoints"].mvg,"/location?query=").concat(encodeURIComponent(this.options.location))}},methods:{update:function(){this.startLoading(),this.fetchData(),this.finishLoading()},fetchData:function(){var t=this;void 0!==this.location&&this.makeRequest(this.endpointDeparture).then((function(e){t.processData(e)}))},processData:function(t){var e=this,i=0,n=[];t.filter(this.filter_results).sort(this.sort_results).slice(0,this.limit).forEach((function(t){n.push(Object(r["a"])(Object(r["a"])({},t),{},{key:"mvg-dep-".concat(e.location,"-").concat(i)})),i+=1})),this.departures=n},ensure_array:function(t){return"string"===typeof t?[t]:t},filter_results:function(t){if(!this.options.filters)return!0;var e=!this.options.filters.line||this.ensure_array(this.options.filters.line).includes(t.label);return e=e&&(!this.options.filters.product||this.ensure_array(this.options.filters.product).some((function(e){return e.toLowerCase()===t.transportType.toLowerCase()}))),e=e&&(!this.options.filters.destination||this.ensure_array(this.options.filters.destination).some((function(e){return e.toLowerCase()===t.destination.toLowerCase()}))),e},sort_results:function(t,e){var i=t.realtimeDepartureTime?t.realtimeDepartureTime:t.plannedDepartureTime,n=e.realtimeDepartureTime?e.realtimeDepartureTime:e.plannedDepartureTime;return i>n?1:i<n?-1:t.label<e.label?1:t.label>e.label?-1:t.destination<e.destination?1:t.destination>e.destination?-1:0},makeUrl:function(t){var e=this.options.host||"https://healthchecks.io";return"".concat(e,"/checks/").concat(t,"/details")},mvgTooltipDeparture:function(t){var e="";return t.realtime&&(e+="Live: ".concat(Object(c["t"])(t.realtimeDepartureTime),"<br />")),e+="Planned: ".concat(Object(c["t"])(t.plannedDepartureTime),"<br />"),t.realtime&&(e+="Live!<br />"),{content:e,html:!0,trigger:"hover",delay:250,classes:"mvg-info-tt"}},mvgTooltipDestination:function(t){var e="<b>Infos:</b><br />".concat(t.messages.join("<br />"));return t.platform&&(e+="Platform: ".concat(t.platform,"<br />")),t.cancelled&&(e+="<b>Cancelled!</b><br />"),{content:e,html:!0,trigger:"hover",delay:250,classes:"mvg-info-tt"}}}},l=u,p=(i("8953"),i("289c"),i("cb62"),i("2877")),d=Object(p["a"])(l,n,o,!1,null,"0b96cf0a",null);e["default"]=d.exports},cb62:function(t,e,i){"use strict";i("bce2")},f6e9:function(t,e,i){}}]);
//# sourceMappingURL=chunk-c8bd4cd0.151b6410.js.map