{"version":3,"sources":["webpack:///./src/components/Widgets/NextcloudPhpOpcache.vue?0f17","webpack:///./src/mixins/WidgetMixin.js","webpack:///./src/mixins/NextcloudMixin.js","webpack:///./src/components/Widgets/NextcloudPhpOpcache.vue","webpack:///src/components/Widgets/NextcloudPhpOpcache.vue","webpack:///./src/components/Widgets/NextcloudPhpOpcache.vue?f13e","webpack:///./src/components/Widgets/NextcloudPhpOpcache.vue?914f"],"names":["WidgetMixin","props","options","type","Object","default","data","progress","Progress","color","overrideProxyChoice","overrideUpdateInterval","disableLoader","updater","defaultTimeout","mounted","this","fetchData","updateInterval","continuousUpdates","beforeDestroy","clearInterval","computed","proxyReqEndpoint","baseUrl","process","VUE_APP_DOMAIN","window","location","origin","concat","serviceEndpoints","corsProxy","useProxy","usersInterval","methods","update","startLoading","_this","setInterval","error","msg","stackTrace","ErrorHandler","ignoreErrors","$emit","start","finishLoading","_this2","setTimeout","end","tooltip","content","html","arguments","length","undefined","trigger","delay","makeRequest","endpoint","protocol","body","_this3","method","url","JSON","stringify","CustomHeaders","headers","timeout","requestConfig","Promise","resolve","reject","axios","request","then","response","success","message","catch","dataFetchError","finally","validCredentials","capabilities","notifications","enabled","features","userStatus","capabilitiesLastUpdated","branding","name","logo","slogan","version","string","edition","hostname","username","password","test","authBase","Accept","Authorization","btoa","capabilitiesTtl","parseInt","id","hasValidCredentials","validateResponse","_response$ocs","_response$ocs2","ocs","meta","status","statuscode","allowedStatuscodes","includes","loadCapabilities","Date","getTime","processCapabilities","capResponse","_ocdata$capabilities","_ocdata$capabilities2","_ocdata$capabilities3","_ocdata$version","_ocdata$version2","ocdata","capNotif","theming","user_status","getTimeAgo","time","formatDateTime","timestampToDateTime","convertBytes","bytes","decimals","formatHtml","formatted","toString","m","match","formatNumber","number","formatPercent","n","parseFloat","toFixed","split","d","getValueFromCss","colorVar","cssProps","getComputedStyle","$el","document","documentElement","getPropertyValue","trim","getColorRgba","alpha","_this$getValueFromCss","map","x","_this$getValueFromCss2","_slicedToArray","r","g","b","tt","key","$t","render","_vm","_c","_self","didLoadData","staticClass","directives","rawName","value","opcacheStartTimeTooltip","expression","_v","opcache","opcache_enabled","_s","cache_full","_e","opcacheStatsTooltip","domProps","opcache_stats","hits","misses","opcache_hit_rate","opcacheMemoryUsageTooltip","memory_usage","used_memory_percentage","total_memory","opcacheInternedStringsTooltip","interned_strings_usage","number_of_strings","staticRenderFns","mixins","NextcloudMixin","components","full","opcache_statistics","num_cached_scripts","num_cached_keys","max_cached_keys","start_time","last_restart_time","used_memory","free_memory","wasted_memory","current_wasted_percentage","buffer_size","_this$opcache","opcache_interned","processServerInfo","serverData","_data$server","server","php","updateOpcacheMemory","updateOpcacheInterned","toLocaleString","classes","created","component"],"mappings":"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","file":"js/chunk-468d3a74.a256f3b4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NextcloudPhpOpcache.vue?vue&type=style&index=0&id=51253a44&prod&scoped=true&lang=scss\"","/**\n * Mixin that all pre-built and custom widgets extend from.\n * Manages loading state, error handling, data updates and user options\n */\nimport axios from 'axios';\nimport { Progress } from 'rsup-progress';\nimport ErrorHandler from '@/utils/ErrorHandler';\nimport { serviceEndpoints } from '@/utils/defaults';\n\nconst WidgetMixin = {\n  props: {\n    options: {\n      type: Object,\n      default: {},\n    },\n  },\n  data: () => ({\n    progress: new Progress({ color: 'var(--progress-bar)' }),\n    overrideProxyChoice: false,\n    overrideUpdateInterval: null,\n    disableLoader: false, // Prevent ever showing the loader\n    updater: null, // Stores interval\n    defaultTimeout: 50000,\n  }),\n  /* When component mounted, fetch initial data */\n  mounted() {\n    this.fetchData();\n    if (this.updateInterval) {\n      this.continuousUpdates();\n      this.disableLoader = true;\n    }\n  },\n  beforeDestroy() {\n    if (this.updater) {\n      clearInterval(this.updater);\n    }\n  },\n  computed: {\n    proxyReqEndpoint() {\n      const baseUrl = process.env.VUE_APP_DOMAIN || window.location.origin;\n      return `${baseUrl}${serviceEndpoints.corsProxy}`;\n    },\n    useProxy() {\n      return this.options.useProxy || this.overrideProxyChoice;\n    },\n    /* Returns either a number in ms to continuously update widget data. Or 0 for no updates */\n    updateInterval() {\n      const usersInterval = this.options.updateInterval;\n      if (usersInterval === null && this.overrideUpdateInterval) {\n        return this.overrideUpdateInterval * 1000;\n      }\n      if (!usersInterval) return 0;\n      // If set to `true`, then default to 30 seconds\n      if (typeof usersInterval === 'boolean') return 30 * 1000;\n      // If set to a number, and within valid range, return user choice\n      if (typeof usersInterval === 'number'\n        && usersInterval >= 2\n        && usersInterval <= 7200) {\n        return usersInterval * 1000;\n      }\n      return 0;\n    },\n  },\n  methods: {\n    /* Re-fetches external data, called by parent. Usually overridden by widget */\n    update() {\n      this.startLoading();\n      this.fetchData();\n    },\n    /* If continuous updates enabled, create interval */\n    continuousUpdates() {\n      this.updater = setInterval(() => { this.update(); }, this.updateInterval);\n    },\n    /* Called when an error occurs. Logs to handler, and passes to parent component */\n    error(msg, stackTrace) {\n      ErrorHandler(msg, stackTrace);\n      if (!this.options.ignoreErrors) {\n        this.$emit('error', msg);\n      }\n    },\n    /* When a data request update starts, show loader */\n    startLoading() {\n      if (!this.disableLoader) {\n        this.$emit('loading', true);\n        this.progress.start();\n      }\n    },\n    /* When a data request finishes, hide loader */\n    finishLoading() {\n      this.$emit('loading', false);\n      setTimeout(() => { this.progress.end(); }, 500);\n    },\n    /* Overridden by child component. Will make network request, then end loader */\n    fetchData() {\n      this.finishLoading();\n    },\n    /* Used as v-tooltip, pass text content in, and will show on hover */\n    tooltip(content, html = false) {\n      return {\n        content, html, trigger: 'hover focus', delay: 250,\n      };\n    },\n    /* Makes data request, returns promise */\n    makeRequest(endpoint, options, protocol, body) {\n      // Request Options\n      const method = protocol || 'GET';\n      const url = this.useProxy ? this.proxyReqEndpoint : endpoint;\n      const data = JSON.stringify(body || {});\n      const CustomHeaders = options || null;\n      const headers = this.useProxy\n        ? { 'Target-URL': endpoint, CustomHeaders: JSON.stringify(CustomHeaders) } : CustomHeaders;\n      const timeout = this.options.timeout || this.defaultTimeout;\n      const requestConfig = {\n        method, url, headers, data, timeout,\n      };\n      // Make request\n      return new Promise((resolve, reject) => {\n        axios.request(requestConfig)\n          .then((response) => {\n            if (response.data.success === false) {\n              this.error('Proxy returned error from target server', response.data.message);\n            }\n            resolve(response.data);\n          })\n          .catch((dataFetchError) => {\n            this.error('Unable to fetch data', dataFetchError);\n            reject(dataFetchError);\n          })\n          .finally(() => {\n            this.finishLoading();\n          });\n      });\n    },\n  },\n};\n\nexport default WidgetMixin;\n","import { serviceEndpoints } from '@/utils/defaults';\nimport {\n  convertBytes, formatNumber, getTimeAgo, timestampToDateTime,\n} from '@/utils/MiscHelpers';\n\n/**\n * Reusable mixin for Nextcloud widgets\n * Nextcloud APIs\n *  - capabilities: https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#capabilities-api\n *  - userstatus: https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-status-api.html#user-status-retrieve-statuses\n *  - user: https://docs.nextcloud.com/server/latest/developer_manual/client_apis/OCS/ocs-api-overview.html#user-metadata\n *  - notifications: https://github.com/nextcloud/notifications/blob/master/docs/ocs-endpoint-v2.md\n *  - serverinfo: https://github.com/nextcloud/serverinfo\n */\nexport default {\n  data() {\n    return {\n      validCredentials: null,\n      capabilities: {\n        notifications: {\n          enabled: null,\n          features: [],\n        },\n        userStatus: null,\n      },\n      capabilitiesLastUpdated: 0,\n      branding: {\n        name: null,\n        logo: null,\n        url: null,\n        slogan: null,\n      },\n      version: {\n        string: null,\n        edition: null,\n      },\n    };\n  },\n  computed: {\n    /* The user provided Nextcloud hostname */\n    hostname() {\n      if (!this.options.hostname) this.error('A hostname is required');\n      return this.options.hostname;\n    },\n    /* The user provided Nextcloud username */\n    username() {\n      if (!this.options.username) this.error('A username is required');\n      return this.options.username;\n    },\n    /* The user provided Nextcloud password */\n    password() {\n      if (!this.options.password) this.error('An app-password is required');\n      // reject Nextcloud user passord (enforce 'app-password')\n      if (!/^([a-z0-9]{5}-){4}[a-z0-9]{5}$/i.test(this.options.password)) {\n        this.error('Please use a Nextcloud app-password, not your login password.');\n        return '';\n      }\n      return this.options.password;\n    },\n    /* HTTP headers for Nextcloud API requests */\n    headers() {\n      const authBase = `${this.username}:${this.password}`;\n      return {\n        'OCS-APIREQUEST': true,\n        Accept: 'application/json',\n        Authorization: `Basic ${window.btoa(authBase)}`,\n      };\n    },\n    /* TTL for data delivered by the capabilities endpoint, ms */\n    capabilitiesTtl() {\n      return (parseInt(this.options.capabilitiesTtl, 10) || 3600) * 1000;\n    },\n    proxyReqEndpoint() {\n      const baseUrl = process.env.VUE_APP_DOMAIN || window.location.origin;\n      return `${baseUrl}${serviceEndpoints.corsProxy}`;\n    },\n  },\n  methods: {\n    /* Nextcloud API endpoints */\n    endpoint(id) {\n      switch (id) {\n        case 'user':\n          return `${this.hostname}/ocs/v1.php/cloud/users/${this.username}`;\n        case 'userstatus':\n          return `${this.hostname}/ocs/v2.php/apps/user_status/api/v1/statuses`;\n        case 'serverinfo':\n          return `${this.hostname}/ocs/v2.php/apps/serverinfo/api/v1/info`;\n        case 'notifications':\n          return `${this.hostname}/ocs/v2.php/apps/notifications/api/v2/notifications`;\n        case 'capabilities':\n        default:\n          return `${this.hostname}/ocs/v1.php/cloud/capabilities`;\n      }\n    },\n    /* Helper for widgets to terminate {fetchData} early */\n    hasValidCredentials() {\n      return this.validCredentials !== false\n             && this.username.length > 0\n             && this.password.length > 0;\n    },\n    /* Primary handler for every Nextcloud API response */\n    validateResponse(response) {\n      const data = response?.ocs?.data;\n      let meta = response?.ocs?.meta;\n      const error = response?.error; // Dashy error when cors-proxied\n      if (error && error.status) {\n        meta = { statuscode: error.status };\n      }\n      if (!meta || !meta.statuscode || !data) {\n        this.error('Invalid response');\n      }\n      switch (meta.statuscode) {\n        case 401:\n          this.validCredentials = false;\n          this.error(\n            `Access denied for user ${this.username}.`\n            + ' Note that some Nextcloud widgets only work with an admin user.',\n          );\n          break;\n        case 429:\n          this.validCredentials = false;\n          this.error(\n            'The server indicated \\'rate-limit reached\\' error (HTTP 429).'\n            + ' The server-info API may return this error for incorrect user/password.',\n          );\n          break;\n        case 993:\n        case 997:\n        case 998:\n          this.validCredentials = false;\n          this.error(\n            'The provided app-password is not permitted to access the requested resource or it has'\n            + ' been revoked, or the username/password combination is incorrect',\n          );\n          break;\n        default:\n          this.validCredentials = true;\n          if (!this.allowedStatuscodes().includes(meta.statuscode)) {\n            this.error('Unexpected response');\n          }\n          break;\n      }\n      return data;\n    },\n    /* Process the capabilities endpoint if {capabilitiesTtl} has expired */\n    loadCapabilities() {\n      if ((new Date().getTime()) - this.capabilitiesLastUpdated > this.capabilitiesTtl) {\n        return this.makeRequest(this.endpoint('capabilities'), this.headers)\n          .then(this.processCapabilities);\n      }\n      return Promise.resolve();\n    },\n    /* Update the sate based on the capabilites response */\n    processCapabilities(capResponse) {\n      const ocdata = this.validateResponse(capResponse);\n      const capNotif = ocdata.capabilities?.notifications?.['ocs-endpoints'];\n      this.branding = ocdata.capabilities?.theming;\n      this.capabilities.notifications.enabled = !!(capNotif?.length);\n      this.capabilities.notifications.features = capNotif || [];\n      this.capabilities.userStatus = !!(ocdata.capabilities?.user_status?.enabled);\n      this.version.string = ocdata.version?.string;\n      this.version.edition = ocdata.version?.edition;\n      this.capabilitiesLastUpdated = new Date().getTime();\n    },\n    /* Shared template helpers */\n    getTimeAgo(time) {\n      return getTimeAgo(time);\n    },\n    formatDateTime(time) {\n      return timestampToDateTime(time);\n    },\n    /* Add additional formatting to {MiscHelpers.convertBytes()} */\n    convertBytes(bytes, decimals = 2, formatHtml = true) {\n      const formatted = convertBytes(bytes, decimals).toString();\n      if (!formatHtml) return formatted;\n      const m = formatted.match(/(-?\\d+)((\\.\\d+)?\\s(([KMGTPEZY]B|Bytes)))/);\n      return `${m[1]}<span class=\"decimals\">${m[2]}</span>`;\n    },\n    /* Add additional formatting to {MiscHelpers.formatNumber()} */\n    formatNumber(number, decimals = 1, formatHtml = true) {\n      const formatted = formatNumber(number, decimals).toString();\n      if (!formatHtml) return formatted;\n      const m = formatted.match(/(\\d+)((\\.\\d+)?([KMBT]?))/);\n      return `${m[1]}<span class=\"decimals\">${m[2]}</span>`;\n    },\n    /* Format a number as percentage value */\n    formatPercent(number, decimals = 2) {\n      const n = parseFloat(number).toFixed(decimals).split('.');\n      const d = n.length > 1 ? `.${n[1]}` : '';\n      return `${n[0]}<span class=\"decimals\">${d}%</span>`;\n    },\n    /* Similar to {MiscHelpers.getValueFromCss()} but uses the widget root node to get\n     * the computed style so widget color is respected in variable widget color themes. */\n    getValueFromCss(colorVar) {\n      const cssProps = getComputedStyle(this.$el || document.documentElement);\n      return cssProps.getPropertyValue(`--${colorVar}`).trim();\n    },\n    /* Get {colorVar} CSS property value and return as rgba() */\n    getColorRgba(colorVar, alpha = 1) {\n      const [r, g, b] = this.getValueFromCss(colorVar).match(/\\w\\w/g).map(x => parseInt(x, 16));\n      return `rgba(${r},${g},${b},${alpha})`;\n    },\n    /* Translation shorthand with key prefix */\n    tt(key, options = null) {\n      return this.$t(`widgets.nextcloud.${key}`, options);\n    },\n  },\n};\n","var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.didLoadData)?_c('div',{staticClass:\"nextcloud-widget nextcloud-phpopcache-wrapper\"},[_c('div',{staticClass:\"sep\"},[_c('p',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.opcacheStartTimeTooltip()),expression:\"opcacheStartTimeTooltip()\"}]},[_c('i',{staticClass:\"fal fa-microchip\"}),_c('strong',[_vm._v(\"PHP opcache\")]),_vm._v(\"  \"),(_vm.opcache.opcache_enabled)?_c('em',{staticClass:\"oc-enabled\"},[_vm._v(\" \"+_vm._s(_vm.tt('enabled'))+\" \")]):_c('em',{staticClass:\"oc-disabled\"},[_vm._v(_vm._s(_vm.tt('disabled')))]),_vm._v(\"  \"),(_vm.opcache.cache_full)?_c('strong',{staticClass:\"oc-full\"},[_c('i',{staticClass:\"far fa-siren-on\"}),_vm._v(_vm._s(_vm.tt('cache-full'))+\" \")]):_vm._e()]),_c('hr'),(_vm.opcache.opcache_enabled)?_c('div',[_c('p',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.opcacheStatsTooltip()),expression:\"opcacheStatsTooltip()\"}]},[_c('i',{staticClass:\"fal fa-bullseye-arrow\"}),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatNumber(_vm.opcache_stats.hits))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('hits')))]),_vm._v(\"  \"),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatNumber(_vm.opcache_stats.misses))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('misses')))]),_vm._v(\"  \"),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatPercent(_vm.opcache_stats.opcache_hit_rate, 3))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('hit-rate')))])]),_c('hr'),_c('p',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.opcacheMemoryUsageTooltip()),expression:\"opcacheMemoryUsageTooltip()\"}]},[_c('i',{staticClass:\"fal fa-memory\"}),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatPercent(_vm.opcache.memory_usage.used_memory_percentage, 1))}}),_vm._v(\"  \"),_c('small',[_vm._v(\"of\")]),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.convertBytes(_vm.opcache.memory_usage.total_memory))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('memory-used')))])]),_c('hr'),_c('p',{directives:[{name:\"tooltip\",rawName:\"v-tooltip\",value:(_vm.opcacheInternedStringsTooltip()),expression:\"opcacheInternedStringsTooltip()\"}]},[_c('i',{staticClass:\"fal fa-puzzle-piece\"}),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatNumber(_vm.opcache.interned_strings_usage.number_of_strings, 1, true))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('strings-use')))]),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.formatPercent(_vm.opcache.interned_strings_usage.used_memory_percentage))}}),_vm._v(\"  \"),_c('small',[_vm._v(_vm._s(_vm.tt('of')))]),_c('em',{domProps:{\"innerHTML\":_vm._s(_vm.convertBytes(_vm.opcache.interned_strings_usage.total_memory))}})]),_c('hr')]):_vm._e()])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div v-if=\"didLoadData\" class=\"nextcloud-widget nextcloud-phpopcache-wrapper\">\n  <div class=\"sep\">\n    <!-- PHP opcache enabled and cache full -->\n    <p v-tooltip=\"opcacheStartTimeTooltip()\">\n      <i class=\"fal fa-microchip\"></i>\n      <strong>PHP opcache</strong>&nbsp;\n      <em v-if=\"opcache.opcache_enabled\" class=\"oc-enabled\">\n        {{ tt('enabled') }}\n      </em>\n      <em v-else class=\"oc-disabled\">{{ tt('disabled') }}</em>&nbsp;\n      <strong v-if=\"opcache.cache_full\" class=\"oc-full\">\n        <i class=\"far fa-siren-on\"></i>{{ tt('cache-full') }}\n      </strong>\n    </p>\n    <hr/>\n    <!-- PHP opcache stats -->\n    <div v-if=\"opcache.opcache_enabled\">\n      <!-- PHP opcache stats: hit/miss -->\n      <p v-tooltip=\"opcacheStatsTooltip()\">\n        <i class=\"fal fa-bullseye-arrow\"></i>\n        <em v-html=\"formatNumber(opcache_stats.hits)\"></em>&nbsp;\n        <small>{{ tt('hits') }}</small>&nbsp;\n        <em v-html=\"formatNumber(opcache_stats.misses)\"></em>&nbsp;\n        <small>{{ tt('misses') }}</small>&nbsp;\n        <em v-html=\"formatPercent(opcache_stats.opcache_hit_rate, 3)\"></em>&nbsp;\n        <small>{{ tt('hit-rate') }}</small>\n      </p>\n      <hr/>\n      <!-- PHP opcache stats: memory -->\n      <p v-tooltip=\"opcacheMemoryUsageTooltip()\">\n        <i class=\"fal fa-memory\"></i>\n        <em v-html=\"formatPercent(opcache.memory_usage.used_memory_percentage, 1)\"></em>&nbsp;\n        <small>of</small>\n        <em v-html=\"convertBytes(opcache.memory_usage.total_memory)\"></em>&nbsp;\n        <small>{{ tt('memory-used') }}</small>\n      </p>\n      <hr/>\n      <!-- PHP opcache stats: interned strings -->\n      <p v-tooltip=\"opcacheInternedStringsTooltip()\">\n        <i class=\"fal fa-puzzle-piece\"></i>\n        <em v-html=\"formatNumber(opcache.interned_strings_usage.number_of_strings, 1, true)\"></em>\n        &nbsp;<small>{{ tt('strings-use') }}</small>\n        <em v-html=\"formatPercent(opcache.interned_strings_usage.used_memory_percentage)\"></em>\n        &nbsp;<small>{{ tt('of') }}</small>\n        <em v-html=\"convertBytes(opcache.interned_strings_usage.total_memory)\"></em>\n      </p>\n      <hr/>\n    </div>\n  </div>\n</div>\n</template>\n\n<script>\nimport WidgetMixin from '@/mixins/WidgetMixin';\nimport NextcloudMixin from '@/mixins/NextcloudMixin';\n\n/**\n * NextcloudPhpOpcache widget - Shows statistics about PHP opcache performance\n * Used endpoints\n *  - serverinfo: requires Nextcloud admin user\n */\nexport default {\n  mixins: [WidgetMixin, NextcloudMixin],\n  components: {},\n  data() {\n    return {\n      opcache: {\n        opcache_enabled: null,\n        full: null,\n        opcache_statistics: {\n          num_cached_scripts: null,\n          num_cached_keys: null,\n          max_cached_keys: null,\n          hits: null,\n          start_time: null,\n          last_restart_time: null,\n          misses: null,\n          opcache_hit_rate: null,\n        },\n        memory_usage: {\n          used_memory: null,\n          free_memory: null,\n          total_memory: null,\n          wasted_memory: null,\n          used_memory_percentage: null,\n          current_wasted_percentage: null,\n        },\n        interned_strings_usage: {\n          buffer_size: null,\n          used_memory: null,\n          total_memory: null,\n          free_memory: null,\n          number_of_strings: null,\n          used_memory_percentage: null,\n        },\n      },\n    };\n  },\n  computed: {\n    didLoadData() {\n      return typeof (this?.opcache?.opcache_enabled) === 'boolean';\n    },\n    // shortcuts to data members\n    opcache_stats() {\n      return this.opcache.opcache_statistics;\n    },\n    opcache_interned() {\n      return this.opcache.interned_strings_usage;\n    },\n  },\n  methods: {\n    allowedStatuscodes() {\n      return [200];\n    },\n    fetchData() {\n      if (!this.hasValidCredentials()) return;\n      this.makeRequest(this.endpoint('serverinfo'), this.headers)\n        .then(this.processServerInfo)\n        .finally(() => this.finishLoading());\n    },\n    processServerInfo(serverData) {\n      const data = this.validateResponse(serverData);\n      this.opcache = data.server?.php?.opcache;\n      if (!this.opcache) return;\n      this.updateOpcacheMemory();\n      this.updateOpcacheInterned();\n    },\n    updateOpcacheMemory() {\n      this.opcache_stats.opcache_hit_rate = parseFloat(\n        this.opcache_stats.opcache_hit_rate,\n      ).toFixed(3);\n      this.opcache.memory_usage.total_memory = (\n        this.opcache.memory_usage.used_memory + this.opcache.memory_usage.free_memory\n      );\n      this.opcache.memory_usage.used_memory_percentage = parseFloat(\n        (this.opcache.memory_usage.used_memory / this.opcache.memory_usage.total_memory) * 100,\n      ).toFixed(1);\n    },\n    updateOpcacheInterned() {\n      this.opcache_interned.total_memory = (\n        this.opcache_interned.used_memory + this.opcache_interned.free_memory\n      );\n      this.opcache_interned.used_memory_percentage = parseFloat(\n        (this.opcache_interned.used_memory / this.opcache_interned.total_memory) * 100,\n      ).toFixed(5);\n    },\n    /* Tooltip generators */\n    opcacheStartTimeTooltip() {\n      let content = `${this.tt('started')} `\n                  + `${new Date(this.opcache_stats.start_time * 1000).toLocaleString()}`;\n      if (this.opcache_stats.last_restart_time) {\n        content = content.concat(\n          `<br><br>${this.tt('last-restart')} `\n          + `${new Date(this.opcache_stats.last_restart_time * 1000).toLocaleString()}`,\n        );\n      }\n      return {\n        content, html: true, trigger: 'hover focus', delay: 250, classes: 'nc-tooltip',\n      };\n    },\n    opcacheStatsTooltip() {\n      const content = `${parseFloat(this.opcache_stats.hits).toLocaleString()} ${this.tt('hits')}<br>`\n        + `${parseFloat(this.opcache_stats.misses).toLocaleString()} ${this.tt('misses')}<br><br>`\n        + `${parseFloat(this.opcache_stats.num_cached_scripts).toLocaleString()} ${this.tt('scripts')}<br>`\n        + `${parseFloat(this.opcache_stats.num_cached_keys).toLocaleString()} ${this.tt('keys')}<br>`\n        + `${parseFloat(this.opcache_stats.max_cached_keys).toLocaleString()} ${this.tt('max-keys')}<br>`;\n      return {\n        content, html: true, trigger: 'hover focus', delay: 250, classes: 'nc-tooltip',\n      };\n    },\n    opcacheMemoryUsageTooltip() {\n      const content = `PHP opcache ${this.tt('memory-utilisation')}<br><br>`\n        + `${this.convertBytes(this.opcache.memory_usage.total_memory)} ${this.tt('total')}<br>`\n        + `${this.convertBytes(this.opcache.memory_usage.used_memory)} ${this.tt('used')}<br>`\n        + `${this.convertBytes(this.opcache.memory_usage.free_memory)} ${this.tt('free')}<br><br>`\n        + `${this.convertBytes(this.opcache.memory_usage.wasted_memory)} (`\n        + `${parseFloat(this.opcache.memory_usage.current_wasted_percentage).toFixed(1)}%) ${this.tt('wasted')}`;\n      return {\n        content, html: true, trigger: 'hover focus', delay: 250, classes: 'nc-tooltip',\n      };\n    },\n    opcacheInternedStringsTooltip() {\n      const content = 'PHP opcache interned strings<br><br>'\n        + `${this.convertBytes(this.opcache_interned.buffer_size)} ${this.tt('total')} ${this.tt('memory')}<br>`\n        + `${this.convertBytes(this.opcache_interned.used_memory)} ${this.tt('used')} ${this.tt('memory')}<br>`\n        + `${this.convertBytes(this.opcache_interned.free_memory)} ${this.tt('free')} ${this.tt('memory')}<br><br>`\n        + `${parseFloat(this.opcache_interned.number_of_strings).toLocaleString()}`\n        + ' strings';\n      return {\n        content, html: true, trigger: 'hover focus', delay: 250, classes: 'nc-tooltip',\n      };\n    },\n  },\n  created() {\n    this.overrideUpdateInterval = 60;\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles/widgets/nextcloud-shared.scss';\n.nextcloud-phpopcache-wrapper {\n  .oc-enabled {\n    color: var(--success);\n  }\n  .oc-disabled {\n    color: var(--neutral);\n  }\n  .oc-full {\n    color: var(--danger);\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NextcloudPhpOpcache.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NextcloudPhpOpcache.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./NextcloudPhpOpcache.vue?vue&type=template&id=51253a44&scoped=true\"\nimport script from \"./NextcloudPhpOpcache.vue?vue&type=script&lang=js\"\nexport * from \"./NextcloudPhpOpcache.vue?vue&type=script&lang=js\"\nimport style0 from \"./NextcloudPhpOpcache.vue?vue&type=style&index=0&id=51253a44&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51253a44\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}