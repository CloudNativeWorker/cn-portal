{"version":3,"sources":["webpack:///./src/components/Widgets/PiHoleTraffic.vue","webpack:///src/components/Widgets/PiHoleTraffic.vue","webpack:///./src/components/Widgets/PiHoleTraffic.vue?2018","webpack:///./src/components/Widgets/PiHoleTraffic.vue?709c"],"names":["render","_vm","this","_c","_self","staticClass","attrs","chartId","staticRenderFns","mixins","WidgetMixin","ChartingMixin","components","data","status","dataTable","blockPercentChart","computed","hostname","usersChoice","options","error","apiKey","endpoint","concat","methods","fetchData","_this","makeRequest","then","response","validate","processData","Array","isArray","ads_over_time","domains_over_time","length","_this2","timeData","domainsData","Object","keys","forEach","time","push","formatTime","adsData","chartData","labels","datasets","name","type","values","generateChart","Chart","title","height","chartHeight","colors","truncateLegends","lineOptions","regionFill","hideDots","axisOptions","xIsSeries","xAxisMode","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,kBAAkBC,MAAM,CAAC,GAAKL,EAAIM,YAEvHC,EAAkB,G,4ECMP,GACfC,OAAA,CAAAC,OAAAC,QACAC,WAAA,GACAC,KAAA,WACA,OACAC,OAAA,KACAC,UAAA,KACAC,kBAAA,OAGAC,SAAA,CAEAC,SAAA,WACA,IAAAC,EAAA,KAAAC,QAAAF,SAEA,OADAC,GAAA,KAAAE,MAAA,yDACAF,GAAA,kBAEAG,OAAA,WAEA,OADA,KAAAF,QAAAE,QAAA,KAAAD,MAAA,4CACA,KAAAD,QAAAE,QAEAC,SAAA,WACA,SAAAC,OAAA,KAAAN,SAAA,2CAAAM,OAAA,KAAAF,UAGAG,QAAA,CAEAC,UAAA,eAAAC,EAAA,KACA,KAAAC,YAAA,KAAAL,UACAM,MAAA,SAAAC,GACAH,EAAAI,SAAAD,IACAH,EAAAK,YAAAF,OAIAC,SAAA,SAAAD,GACA,GAAAG,MAAAC,QAAAJ,GACA,KAAAT,MAAA,uEACA,KAAAS,EAAAK,gBAAAL,EAAAM,kBAEA,OADA,KAAAf,MAAA,gDACA,EACA,GAAAS,EAAAK,cAAAE,OAAA,EAEA,OADA,KAAAhB,MAAA,8DACA,EAEA,UAGAW,YAAA,SAAAnB,GAAA,IAAAyB,EAAA,KACAC,EAAA,GACAC,EAAA,GACAC,OAAAC,KAAA7B,EAAAuB,mBAAAO,SAAA,SAAAC,GACAL,EAAAM,KAAAP,EAAAQ,WAAA,IAAAF,IACAJ,EAAAK,KAAAhC,EAAAuB,kBAAAQ,OAEA,IAAAG,EAAA,GACAN,OAAAC,KAAA7B,EAAAsB,eAAAQ,SAAA,SAAAC,GACAG,EAAAF,KAAAhC,EAAAsB,cAAAS,OAEA,IAAAI,EAAA,CACAC,OAAAV,EACAW,SAAA,CACA,CAAAC,KAAA,UAAAC,KAAA,MAAAC,OAAAb,GACA,CAAAW,KAAA,cAAAC,KAAA,MAAAC,OAAAN,KAGA,KAAAO,cAAAN,IAEAM,cAAA,SAAAN,GACA,gBAAAO,MAAA,IAAA/B,OAAA,KAAAjB,SAAA,CACAiD,MAAA,uBACA3C,KAAAmC,EACAI,KAAA,aACAK,OAAA,KAAAC,YACAC,OAAA,sBACAC,iBAAA,EACAC,YAAA,CACAC,WAAA,EACAC,SAAA,GAEAC,YAAA,CACAC,WAAA,EACAC,UAAA,aC1FqW,I,YCOjWC,EAAY,eACd,EACAnE,EACAQ,GACA,EACA,KACA,KACA,MAIa,aAAA2D,E","file":"js/chunk-2d225b78.c20108bf.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"pi-hole-traffic\",attrs:{\"id\":_vm.chartId}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :id=\"chartId\" class=\"pi-hole-traffic\"></div>\n</template>\n\n<script>\nimport WidgetMixin from '@/mixins/WidgetMixin';\nimport ChartingMixin from '@/mixins/ChartingMixin';\n\nexport default {\n  mixins: [WidgetMixin, ChartingMixin],\n  components: {},\n  data() {\n    return {\n      status: null,\n      dataTable: null,\n      blockPercentChart: null,\n    };\n  },\n  computed: {\n    /* Let user select which comic to display: random, latest or a specific number */\n    hostname() {\n      const usersChoice = this.options.hostname;\n      if (!usersChoice) this.error('You must specify the hostname for your Pi-Hole server');\n      return usersChoice || 'http://pi.hole';\n    },\n    apiKey() {\n      if (!this.options.apiKey) this.error('API Key is required, please see the docs');\n      return this.options.apiKey;\n    },\n    endpoint() {\n      return `${this.hostname}/admin/api.php?overTimeData10mins&auth=${this.apiKey}`;\n    },\n  },\n  methods: {\n    /* Make GET request to local pi-hole instance */\n    fetchData() {\n      this.makeRequest(this.endpoint)\n        .then((response) => {\n          if (this.validate(response)) {\n            this.processData(response);\n          }\n        });\n    },\n    validate(response) {\n      if (Array.isArray(response)) {\n        this.error('Got success, but found no results, possible authorization error');\n      } else if (!response.ads_over_time || !response.domains_over_time) {\n        this.error('Expected data was not returned from Pi-Hole');\n        return false;\n      } else if (response.ads_over_time.length < 1) {\n        this.error('Request completed succesfully, but no data in Pi-Hole yet');\n        return false;\n      }\n      return true;\n    },\n    /* Assign data variables to the returned data */\n    processData(data) {\n      const timeData = [];\n      const domainsData = [];\n      Object.keys(data.domains_over_time).forEach((time) => {\n        timeData.push(this.formatTime(time * 1000));\n        domainsData.push(data.domains_over_time[time]);\n      });\n      const adsData = [];\n      Object.keys(data.ads_over_time).forEach((time) => {\n        adsData.push(data.ads_over_time[time]);\n      });\n      const chartData = {\n        labels: timeData,\n        datasets: [\n          { name: 'Queries', type: 'bar', values: domainsData },\n          { name: 'Ads Blocked', type: 'bar', values: adsData },\n        ],\n      };\n      this.generateChart(chartData);\n    },\n    generateChart(chartData) {\n      return new this.Chart(`#${this.chartId}`, {\n        title: 'Recent Queries & Ads',\n        data: chartData,\n        type: 'axis-mixed',\n        height: this.chartHeight,\n        colors: ['#20e253', '#f80363'],\n        truncateLegends: true,\n        lineOptions: {\n          regionFill: 1,\n          hideDots: 1,\n        },\n        axisOptions: {\n          xIsSeries: true,\n          xAxisMode: 'tick',\n        },\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleTraffic.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PiHoleTraffic.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PiHoleTraffic.vue?vue&type=template&id=de1c5aa2\"\nimport script from \"./PiHoleTraffic.vue?vue&type=script&lang=js\"\nexport * from \"./PiHoleTraffic.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}