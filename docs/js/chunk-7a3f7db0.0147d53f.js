(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a3f7db0"],{"18f4":function(t,i,e){"use strict";e("94dd")},"1c8e":function(t,i,e){"use strict";e("99af"),e("e9c4"),e("d3b7");var n=e("cee4"),o=e("d445"),s=e("3136"),r=e("5cc6"),a={props:{options:{type:Object,default:{}}},data:function(){return{progress:new o["a"]({color:"var(--progress-bar)"}),overrideProxyChoice:!1,overrideUpdateInterval:null,disableLoader:!1,updater:null,defaultTimeout:5e4}},mounted:function(){this.fetchData(),this.updateInterval&&(this.continuousUpdates(),this.disableLoader=!0)},beforeDestroy:function(){this.updater&&clearInterval(this.updater)},computed:{proxyReqEndpoint:function(){var t=Object({NODE_ENV:"production",VUE_APP_VERSION:"2.1.2",BASE_URL:"/"}).VUE_APP_DOMAIN||window.location.origin;return"".concat(t).concat(r["serviceEndpoints"].corsProxy)},useProxy:function(){return this.options.useProxy||this.overrideProxyChoice},updateInterval:function(){var t=this.options.updateInterval;return null===t&&this.overrideUpdateInterval?1e3*this.overrideUpdateInterval:t?"boolean"===typeof t?3e4:"number"===typeof t&&t>=2&&t<=7200?1e3*t:0:0}},methods:{update:function(){this.startLoading(),this.fetchData()},continuousUpdates:function(){var t=this;this.updater=setInterval((function(){t.update()}),this.updateInterval)},error:function(t,i){Object(s["e"])(t,i),this.options.ignoreErrors||this.$emit("error",t)},startLoading:function(){this.disableLoader||(this.$emit("loading",!0),this.progress.start())},finishLoading:function(){var t=this;this.$emit("loading",!1),setTimeout((function(){t.progress.end()}),500)},fetchData:function(){this.finishLoading()},tooltip:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{content:t,html:i,trigger:"hover focus",delay:250}},makeRequest:function(t,i,e,o){var s=this,r=e||"GET",a=this.useProxy?this.proxyReqEndpoint:t,u=JSON.stringify(o||{}),c=i||null,d=this.useProxy?{"Target-URL":t,CustomHeaders:JSON.stringify(c)}:c,l=this.options.timeout||this.defaultTimeout,p={method:r,url:a,headers:d,data:u,timeout:l};return new Promise((function(t,i){n["a"].request(p).then((function(i){!1===i.data.success&&s.error("Proxy returned error from target server",i.data.message),t(i.data)})).catch((function(t){s.error("Unable to fetch data",t),i(t)})).finally((function(){s.finishLoading()}))}))}}};i["a"]=a},"5a74":function(t,i,e){"use strict";e("680b")},"680b":function(t,i,e){},"857a":function(t,i,e){"use strict";var n=e("e330"),o=e("1d80"),s=e("577e"),r=/"/g,a=n("".replace);t.exports=function(t,i,e,n){var u=s(o(t)),c="<"+i;return""!==e&&(c+=" "+e+'="'+a(s(n),r,"&quot;")+'"'),c+">"+u+"</"+i+">"}},"94dd":function(t,i,e){},9911:function(t,i,e){"use strict";var n=e("23e7"),o=e("857a"),s=e("af03");n({target:"String",proto:!0,forced:s("link")},{link:function(t){return o(this,"a","href",t)}})},af03:function(t,i,e){"use strict";var n=e("d039");t.exports=function(t){return n((function(){var i=""[t]('"');return i!==i.toLowerCase()||i.split('"').length>3}))}},ebe5:function(t,i,e){"use strict";e.r(i);e("b0c0"),e("9911");var n=function(){var t=this,i=t._self._c;return t.builds?i("div",{staticClass:"droneci-builds-wrapper"},t._l(t.builds,(function(e){return i("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.infoTooltip(e),expression:"infoTooltip(build)"}],key:e.id,staticClass:"build-row"},[i("div",{staticClass:"status"},[i("p",{class:e.build.status},[t._v(t._s(t._f("formatStatus")(e.build.status)))]),"running"==e.build.status?i("span",[t._v(" "+t._s(t._f("formatTimeAgo")(1e3*e.build.started))+" ago ")]):"pending"!=e.build.status?i("span",[t._v(" "+t._s(t.formatBuildDuration(e))+" ")]):i("span",[t._v(" "+t._s(t._f("formatTimeAgo")(1e3*e.build.created))+" ago ")])]),i("div",{staticClass:"info"},[i("div",{staticClass:"build-name"},[t._v(" "+t._s(e.name)+" "),i("a",{staticClass:"droneci-build-number",attrs:{href:e.baseurl+"/"+e.slug+"/"+e.build.number,target:"_blank"}},[t._v(t._s(e.build.number))])]),i("div",{staticClass:"build-desc"},[i("span",{staticClass:"droneci-extra"},["pull_request"==e.build.event?[i("a",{staticClass:"droneci-extra-info",attrs:{href:e.build.link,target:"_blank"}},[t._v("#"+t._s(t.formatPrId(e.build.link)))]),t._v(" to ")]:"push"==e.build.event?[i("a",{staticClass:"droneci-extra-info",attrs:{href:e.build.link,target:"_blank"}},[t._v("push")]),t._v(" to ")]:t._e(),i("a",{staticClass:"droneci-extra-info",attrs:{href:e.git_http_url,target:"_blank"}},[t._v(" "+t._s(e.build.target)+" ")])],2)])])])})),0):t._e()},o=[],s=e("5530"),r=(e("99af"),e("d81d"),e("fb6a"),e("1c8e")),a=e("b96f"),u={mixins:[r["a"]],components:{},data:function(){return{builds:null}},filters:{formatStatus:function(t){var i="";return"success"===t&&(i="✔"),"failure"!==t&&"error"!==t&&"killed"!==t||(i="✘"),"running"===t&&(i="❖"),"skipped"===t&&(i="↠"),"".concat(i)},formatDate:function(t){return Object(a["s"])(t)},formatTimeAgo:function(t){return Object(a["l"])(t)}},computed:{endpointBuilds:function(){return this.options.host||this.error("drone.ci Host is required"),"".concat(this.options.host,"/api/user/builds")},endpointRepoInfo:function(){return this.options.host||this.error("drone.ci Host is required"),"".concat(this.options.host,"/api/repos/").concat(this.options.repo)},endpointRepoBuilds:function(){return this.options.host||this.error("drone.ci Host is required"),"".concat(this.options.host,"/api/repos/").concat(this.options.repo,"/builds")},repo:function(){return!!this.options.repo&&this.options.repo},apiKey:function(){return this.options.apiKey||this.error("An API key is required, please see the docs for more info"),this.options.apiKey}},methods:{update:function(){this.startLoading(),this.fetchData(),this.finishLoading()},fetchData:function(){var t=this,i={Authorization:"Bearer ".concat(this.apiKey)};!1!==this.repo?this.makeRequest(this.endpointRepoInfo,i).then((function(e){t.makeRequest(t.endpointRepoBuilds,i).then((function(i){t.processRepoBuilds(e,i)}))})):this.makeRequest(this.endpointBuilds,i).then((function(i){t.processBuilds(i)}))},processBuilds:function(t){var i=this,e=t.slice(0,this.options.limit).map((function(t){return Object(s["a"])(Object(s["a"])({},t),{},{baseurl:i.options.host})}));this.builds=e},processRepoBuilds:function(t,i){var e=this,n=i.slice(0,this.options.limit).map((function(i){return Object(s["a"])({build:Object(s["a"])({},i),baseurl:e.options.host},t)}));this.builds=n},infoTooltip:function(t){var i="<b>Trigger:</b> ".concat(t.build.event," by ").concat(t.build.trigger,"<br>")+"<b>Repo:</b> ".concat(t.slug,"<br>")+"<b>Branch:</b> ".concat(t.build.target,"<br>");return{content:i,html:!0,trigger:"hover focus",delay:250,classes:"build-info-tt"}},formatPrId:function(t){return t.split("/").pop()},formatBuildDuration:function(t){return Object(a["m"])(1e3*t.build.started,1e3*t.build.finished)}}},c=u,d=(e("18f4"),e("5a74"),e("2877")),l=Object(d["a"])(c,n,o,!1,null,"225f3510",null);i["default"]=l.exports}}]);
//# sourceMappingURL=chunk-7a3f7db0.0147d53f.js.map