(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-93c6be8c"],{"1c8e":function(t,n,e){"use strict";e("99af"),e("e9c4"),e("d3b7");var o=e("cee4"),i=e("d445"),a=e("3136"),r=e("5cc6"),s={props:{options:{type:Object,default:{}}},data:function(){return{progress:new i["a"]({color:"var(--progress-bar)"}),overrideProxyChoice:!1,overrideUpdateInterval:null,disableLoader:!1,updater:null,defaultTimeout:5e4}},mounted:function(){this.fetchData(),this.updateInterval&&(this.continuousUpdates(),this.disableLoader=!0)},beforeDestroy:function(){this.updater&&clearInterval(this.updater)},computed:{proxyReqEndpoint:function(){var t=Object({NODE_ENV:"production",VUE_APP_VERSION:"2.1.2",BASE_URL:"/"}).VUE_APP_DOMAIN||window.location.origin;return"".concat(t).concat(r["serviceEndpoints"].corsProxy)},useProxy:function(){return this.options.useProxy||this.overrideProxyChoice},updateInterval:function(){var t=this.options.updateInterval;return null===t&&this.overrideUpdateInterval?1e3*this.overrideUpdateInterval:t?"boolean"===typeof t?3e4:"number"===typeof t&&t>=2&&t<=7200?1e3*t:0:0}},methods:{update:function(){this.startLoading(),this.fetchData()},continuousUpdates:function(){var t=this;this.updater=setInterval((function(){t.update()}),this.updateInterval)},error:function(t,n){Object(a["e"])(t,n),this.options.ignoreErrors||this.$emit("error",t)},startLoading:function(){this.disableLoader||(this.$emit("loading",!0),this.progress.start())},finishLoading:function(){var t=this;this.$emit("loading",!1),setTimeout((function(){t.progress.end()}),500)},fetchData:function(){this.finishLoading()},tooltip:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{content:t,html:n,trigger:"hover focus",delay:250}},makeRequest:function(t,n,e,i){var a=this,r=e||"GET",s=this.useProxy?this.proxyReqEndpoint:t,c=JSON.stringify(i||{}),u=n||null,d=this.useProxy?{"Target-URL":t,CustomHeaders:JSON.stringify(u)}:u,p=this.options.timeout||this.defaultTimeout,l={method:r,url:s,headers:d,data:c,timeout:p};return new Promise((function(t,n){o["a"].request(l).then((function(n){!1===n.data.success&&a.error("Proxy returned error from target server",n.data.message),t(n.data)})).catch((function(t){a.error("Unable to fetch data",t),n(t)})).finally((function(){a.finishLoading()}))}))}}};n["a"]=s},"2b1b":function(t,n,e){"use strict";e("9110")},"6faf":function(t,n,e){"use strict";e("cdad")},9110:function(t,n,e){},aaec:function(t,n,e){},b2b1:function(t,n,e){"use strict";e("aaec")},ba75:function(t,n,e){"use strict";e.r(n);e("b0c0");var o=function(){var t=this,n=t._self._c;return n("div",{staticClass:"mvg-connections-outer-wrapper"},[t.showTitle?n("div",{staticClass:"mvg-connections-header"},[t._v(t._s(t.connectionName))]):t._e(),t.connections?n("div",{staticClass:"mvg-wrapper"},t._l(t.connections,(function(e){return n("div",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.mvgTooltipConnection(e),expression:"mvgTooltipConnection(connection)"}],key:e.uniqueId,staticClass:"line"},[n("div",{staticClass:"departure"},[n("span",{staticClass:"time"},[t._v(" "+t._s(t._f("formatTime")(e.parts[0].from.plannedDeparture))+" ")]),n("span",{staticClass:"delay",class:{"has-delay":e.parts[0].from.departureDelayInMinutes>0}},[t._v(t._s(Math.max(parseInt(e.parts[0].from.departureDelayInMinutes)||0,0)))])]),n("div",{staticClass:"changes"},[t._l(e.parts,(function(e,o){return[o>0?n("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.from.name,expression:"part.from.name"}],key:"change-"+o,staticClass:"change"},[t._v("â¬Œ")]):t._e(),"PEDESTRIAN"!=e.line.transportType?n("span",{key:"transport-"+o,staticClass:"transport",class:["type-"+e.line.transportType,"line-"+e.line.label]},[t._v(t._s(e.line.label))]):n("span",{key:"transport-"+o},[t._v("ðŸš¶")])]}))],2),n("span",{staticClass:"time"},[t._v(" "+t._s(t._f("formatDuration")(Date.parse(e.parts[e.parts.length-1].to.plannedDeparture)-Date.parse(e.parts[0].from.plannedDeparture)))+" ")])])})),0):t._e()])},i=[],a=e("3835"),r=(e("99af"),e("a15b"),e("d81d"),e("d3b7"),e("3ca3"),e("2ca0"),e("159b"),e("ddb0"),e("1c8e")),s=e("5cc6"),c={mixins:[r["a"]],components:{},data:function(){return{connections:null,locationSearch:null,connectionName:null,defaultTitle:"Connection",locations:{origin:void 0,destination:void 0}}},created:function(){var t=this,n=this.getLocationId(this.start),e=this.getLocationId(this.end);Promise.all([n,e]).then((function(n){var e=n.map((function(t){return t[0]})),o=Object(a["a"])(e,2);t.locations.origin=o[0],t.locations.destination=o[1],t.defaultTitle="".concat(t.locations.origin.name," - ").concat(t.locations.destination.name),t.fetchData()}))},filters:{formatDepartureTime:function(t){var n=new Date(t).getTime()-(new Date).getTime(),e=Math.max(0,Math.round(n/6e4));return e},formatTime:function(t){var n=new Date(Date.parse(t));function e(t){var n="".concat(t);return n.length<2&&(n="0".concat(n)),n}return"".concat(e(n.getHours()),":").concat(e(n.getMinutes()))},formatDuration:function(t){function n(t){var n="".concat(t);return n.length<2&&(n="0".concat(n)),n}return"".concat(Math.floor(t/36e5),":").concat(n(Math.floor(t/6e4)))}},computed:{start:function(){return this.options.from||this.options.start||this.options.origin||"Marienplatz"},end:function(){return this.options.to||this.options.end||this.options.destination||"Giesing"},title:function(){return this.options.title?this.options.title:this.defaultTitle},showTitle:function(){return!this.options.header||this.options.header},transportTypes:function(){return this.options.transportations?this.options.transportations.join(","):"UBAHN,TRAM,BUS,SBAHN"}},methods:{formatPoint:function(t,n){return"ADDRESS"===t.type||"POI"===t.type?"".concat(n,"Latitude=").concat(t.latitude,"&").concat(n,"Longitude=").concat(t.longitude):"".concat(n,"StationGlobalId=").concat(t.globalId)},isLocationId:function(t){return t||this.error("Location is required"),"string"!==typeof t&&this.error("Location can only be a string"),t.startsWith("de:09162:")},getLocationId:function(t){return this.makeRequest(this.getEndpointLocation(t))},getEndpointLocation:function(t){return"".concat(s["widgetApiEndpoints"].mvg,"/location?query=").concat(encodeURIComponent(t))},endpointConnection:function(){return"".concat(s["widgetApiEndpoints"].mvg,"/connection?").concat(this.formatPoint(this.locations.origin,"origin"),"&").concat(this.formatPoint(this.locations.destination,"destination"),"&routingDateTime=").concat((new Date).toISOString(),"&offsetInMinutes=").concat(this.offset,"&transportTypes=").concat(this.transportTypes)},update:function(){this.startLoading(),this.fetchData(),this.finishLoading()},fetchData:function(){var t=this;void 0!==this.locations.origin&&void 0!==this.locations.destination&&this.makeRequest(this.endpointConnection()).then((function(n){t.processData(n)}))},processData:function(t){this.connections=t},ensure_array:function(t){return"string"===typeof t?[t]:t},mvgTooltipConnection:function(t){var n="",e=this;function o(t){n+="<b>".concat(e.$options.filters.formatTime(t.plannedDeparture),'</b>\n          <span class="delay">+').concat(Math.max(parseInt(t.departureDelayInMinutes,10)||0,0),"</span>\n          <span>").concat(t.name,"</span>")}return o(t.parts[0].from),t.parts.forEach((function(t){o(t.to)})),{content:n,html:!0,trigger:"hover",delay:250,classes:"mvg-connection-detail"}}}},u=c,d=(e("b2b1"),e("6faf"),e("2b1b"),e("2877")),p=Object(d["a"])(u,o,i,!1,null,"41c6ad78",null);n["default"]=p.exports},cdad:function(t,n,e){}}]);
//# sourceMappingURL=chunk-93c6be8c.ae3c4ade.js.map